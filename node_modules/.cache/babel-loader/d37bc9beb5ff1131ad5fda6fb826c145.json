{"ast":null,"code":"import _slicedToArray from\"/Users/paulndam/Documents/Node-Js/Sample-Mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectSpread from\"/Users/paulndam/Documents/Node-Js/Sample-Mern/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useState,useEffect}from\"react\";import auth from\"../../utils/Auth/authHelper\";import{makeStyles}from\"@material-ui/core/styles\";import Paper from\"@material-ui/core/Paper\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import ListItemAvatar from\"@material-ui/core/ListItemAvatar\";import ListItemSecondaryAction from\"@material-ui/core/ListItemSecondaryAction\";import ListItemText from\"@material-ui/core/ListItemText\";import Avatar from\"@material-ui/core/Avatar\";import Button from\"@material-ui/core/Button\";import IconButton from\"@material-ui/core/IconButton\";import{Link}from\"react-router-dom\";import{findPeople,follow}from\"../../api/UserApi/userApi\";import Snackbar from\"@material-ui/core/Snackbar\";import ViewIcon from\"@material-ui/icons/Visibility\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){return{root:theme.mixins.gutters({padding:theme.spacing(1),margin:0}),root2:_objectSpread(_objectSpread({},theme.typography.button),{},{backgroundColor:theme.palette.background,padding:theme.spacing(1)}),title:{margin:\"\".concat(theme.spacing(3),\"px \").concat(theme.spacing(1),\"px \").concat(theme.spacing(2),\"px\"),color:theme.palette.openTitle,fontSize:\"1em\"},avatar:{marginRight:theme.spacing(1)},follow:{right:theme.spacing(2)},snack:{color:theme.palette.protectedTitle},viewButton:{verticalAlign:\"middle\"}};});var FindPeople=function FindPeople(){var classes=useStyles();var _useState=useState({users:[],open:false,followMessage:\"\"}),_useState2=_slicedToArray(_useState,2),values=_useState2[0],setValues=_useState2[1];var jwt=auth.isAuthenticated();useEffect(function(){var abortController=new AbortController();var signal=abortController.signal;findPeople({userId:jwt.user._id},{t:jwt.token},signal).then(function(data){console.log(\"--Data From FindPeople in useEffect---\");if(data&&data.error){console.log(data.error);}else{setValues(_objectSpread(_objectSpread({},values),{},{users:data}));}});return function cleanup(){abortController.abort();};},[]);//Clicking the Follow button will make a call to the follow API, and update the list of users to follow by splicing out the newly followed user.\nvar clickFollow=function clickFollow(user,idx){follow({userId:jwt.user._id},{t:jwt.token},user._id).then(function(data){console.log(\"--- Data in click follow method in find people compo ---\");console.log(data);if(data.error){console.log(data.error);}else{var toFollow=values.users;toFollow.splice(idx,1);setValues(_objectSpread(_objectSpread({},values),{},{users:toFollow,open:true,followMessage:\"Following \".concat(user.name)}));}});};var handleRequestClose=function handleRequestClose(e,reason){setValues(_objectSpread(_objectSpread({},values),{},{open:false}));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Paper,{className:classes.root,elevation:4,style:{backgroundColor:\"#eeeeee\"},children:[/*#__PURE__*/_jsx(\"div\",{className:classes.root2,children:\"Follow Suggestions\"}),/*#__PURE__*/_jsx(List,{children:values.users.map(function(item,i){return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemAvatar,{className:classes.avatar,children:/*#__PURE__*/_jsx(Avatar,{src:\"\".concat(process.env.REACT_APP_API,\"/users/photo/\").concat(item._id)})}),/*#__PURE__*/_jsx(ListItemText,{primary:item.name}),/*#__PURE__*/_jsxs(ListItemSecondaryAction,{className:classes.follow,children:[/*#__PURE__*/_jsx(Link,{to:\"/user/\"+item._id,children:/*#__PURE__*/_jsx(IconButton,{variant:\"contained\",color:\"secondary\",className:classes.viewButton,children:/*#__PURE__*/_jsx(ViewIcon,{})})}),/*#__PURE__*/_jsx(Button,{\"aria-label\":\"Follow\",variant:\"contained\",color:\"primary\",onClick:function onClick(){clickFollow(item,i);},children:\"Follow\"})]})]})},i);})})]}),/*#__PURE__*/_jsx(Snackbar,{anchorOrigin:{vertical:\"bottom\",horizontal:\"right\"},open:values.open,onClose:handleRequestClose,autoHideDuration:6000,message:/*#__PURE__*/_jsx(\"span\",{className:classes.snack,children:values.followMessage})})]});};export default FindPeople;","map":{"version":3,"sources":["/Users/paulndam/Documents/Node-Js/Sample-Mern/client/src/components/FindPeople/FindPeople.jsx"],"names":["React","useState","useEffect","auth","makeStyles","Paper","List","ListItem","ListItemAvatar","ListItemSecondaryAction","ListItemText","Avatar","Button","IconButton","Link","findPeople","follow","Snackbar","ViewIcon","useStyles","theme","root","mixins","gutters","padding","spacing","margin","root2","typography","button","backgroundColor","palette","background","title","color","openTitle","fontSize","avatar","marginRight","right","snack","protectedTitle","viewButton","verticalAlign","FindPeople","classes","users","open","followMessage","values","setValues","jwt","isAuthenticated","abortController","AbortController","signal","userId","user","_id","t","token","then","data","console","log","error","cleanup","abort","clickFollow","idx","toFollow","splice","name","handleRequestClose","e","reason","map","item","i","process","env","REACT_APP_API","vertical","horizontal"],"mappings":"qVAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,IAAP,KAAiB,6BAAjB,CACA,OAASC,UAAT,KAA2B,0BAA3B,CACA,MAAOC,CAAAA,KAAP,KAAkB,yBAAlB,CACA,MAAOC,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,cAAP,KAA2B,kCAA3B,CACA,MAAOC,CAAAA,uBAAP,KAAoC,2CAApC,CACA,MAAOC,CAAAA,YAAP,KAAyB,gCAAzB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,UAAT,CAAqBC,MAArB,KAAmC,2BAAnC,CAEA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,C,wFAEA,GAAMC,CAAAA,SAAS,CAAGf,UAAU,CAAC,SAACgB,KAAD,QAAY,CACvCC,IAAI,CAAED,KAAK,CAACE,MAAN,CAAaC,OAAb,CAAqB,CACzBC,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CADgB,CAEzBC,MAAM,CAAE,CAFiB,CAArB,CADiC,CAKvCC,KAAK,gCACAP,KAAK,CAACQ,UAAN,CAAiBC,MADjB,MAEHC,eAAe,CAAEV,KAAK,CAACW,OAAN,CAAcC,UAF5B,CAGHR,OAAO,CAAEJ,KAAK,CAACK,OAAN,CAAc,CAAd,CAHN,EALkC,CAUvCQ,KAAK,CAAE,CACLP,MAAM,WAAKN,KAAK,CAACK,OAAN,CAAc,CAAd,CAAL,eAA2BL,KAAK,CAACK,OAAN,CAAc,CAAd,CAA3B,eAAiDL,KAAK,CAACK,OAAN,CAAc,CAAd,CAAjD,MADD,CAELS,KAAK,CAAEd,KAAK,CAACW,OAAN,CAAcI,SAFhB,CAGLC,QAAQ,CAAE,KAHL,CAVgC,CAevCC,MAAM,CAAE,CACNC,WAAW,CAAElB,KAAK,CAACK,OAAN,CAAc,CAAd,CADP,CAf+B,CAkBvCT,MAAM,CAAE,CACNuB,KAAK,CAAEnB,KAAK,CAACK,OAAN,CAAc,CAAd,CADD,CAlB+B,CAqBvCe,KAAK,CAAE,CACLN,KAAK,CAAEd,KAAK,CAACW,OAAN,CAAcU,cADhB,CArBgC,CAwBvCC,UAAU,CAAE,CACVC,aAAa,CAAE,QADL,CAxB2B,CAAZ,EAAD,CAA5B,CA6BA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACvB,GAAMC,CAAAA,OAAO,CAAG1B,SAAS,EAAzB,CACA,cAA4BlB,QAAQ,CAAC,CACnC6C,KAAK,CAAE,EAD4B,CAEnCC,IAAI,CAAE,KAF6B,CAGnCC,aAAa,CAAE,EAHoB,CAAD,CAApC,wCAAOC,MAAP,eAAeC,SAAf,eAMA,GAAMC,CAAAA,GAAG,CAAGhD,IAAI,CAACiD,eAAL,EAAZ,CAEAlD,SAAS,CAAC,UAAM,CACd,GAAMmD,CAAAA,eAAe,CAAG,GAAIC,CAAAA,eAAJ,EAAxB,CACA,GAAMC,CAAAA,MAAM,CAAGF,eAAe,CAACE,MAA/B,CAEAxC,UAAU,CACR,CACEyC,MAAM,CAAEL,GAAG,CAACM,IAAJ,CAASC,GADnB,CADQ,CAIR,CAAEC,CAAC,CAAER,GAAG,CAACS,KAAT,CAJQ,CAKRL,MALQ,CAAV,CAMEM,IANF,CAMO,SAACC,IAAD,CAAU,CACfC,OAAO,CAACC,GAAR,CAAY,wCAAZ,EACA,GAAIF,IAAI,EAAIA,IAAI,CAACG,KAAjB,CAAwB,CACtBF,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,KAAjB,EACD,CAFD,IAEO,CACLf,SAAS,gCAAMD,MAAN,MAAcH,KAAK,CAAEgB,IAArB,GAAT,CACD,CACF,CAbD,EAeA,MAAO,SAASI,CAAAA,OAAT,EAAmB,CACxBb,eAAe,CAACc,KAAhB,GACD,CAFD,CAGD,CAtBQ,CAsBN,EAtBM,CAAT,CAwBA;AAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACX,IAAD,CAAOY,GAAP,CAAe,CACjCrD,MAAM,CACJ,CACEwC,MAAM,CAAEL,GAAG,CAACM,IAAJ,CAASC,GADnB,CADI,CAIJ,CAAEC,CAAC,CAAER,GAAG,CAACS,KAAT,CAJI,CAKJH,IAAI,CAACC,GALD,CAAN,CAMEG,IANF,CAMO,SAACC,IAAD,CAAU,CACfC,OAAO,CAACC,GAAR,CAAY,0DAAZ,EACAD,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACA,GAAIA,IAAI,CAACG,KAAT,CAAgB,CACdF,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,KAAjB,EACD,CAFD,IAEO,CACL,GAAIK,CAAAA,QAAQ,CAAGrB,MAAM,CAACH,KAAtB,CACAwB,QAAQ,CAACC,MAAT,CAAgBF,GAAhB,CAAqB,CAArB,EACAnB,SAAS,gCACJD,MADI,MAEPH,KAAK,CAAEwB,QAFA,CAGPvB,IAAI,CAAE,IAHC,CAIPC,aAAa,qBAAeS,IAAI,CAACe,IAApB,CAJN,GAAT,CAMD,CACF,CArBD,EAsBD,CAvBD,CAyBA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,CAAD,CAAIC,MAAJ,CAAe,CACxCzB,SAAS,gCAAMD,MAAN,MAAcF,IAAI,CAAE,KAApB,GAAT,CACD,CAFD,CAIA,mBACE,oCACE,MAAC,KAAD,EACE,SAAS,CAAEF,OAAO,CAACxB,IADrB,CAEE,SAAS,CAAE,CAFb,CAGE,KAAK,CAAE,CAAES,eAAe,CAAE,SAAnB,CAHT,wBAKE,YAAK,SAAS,CAAEe,OAAO,CAAClB,KAAxB,UAAgC,oBAAhC,EALF,cAME,KAAC,IAAD,WACGsB,MAAM,CAACH,KAAP,CAAa8B,GAAb,CAAiB,SAACC,IAAD,CAAOC,CAAP,CAAa,CAC7B,mBACE,mCACE,MAAC,QAAD,yBACE,KAAC,cAAD,EAAgB,SAAS,CAAEjC,OAAO,CAACR,MAAnC,uBACE,KAAC,MAAD,EACE,GAAG,WAAK0C,OAAO,CAACC,GAAR,CAAYC,aAAjB,yBAA8CJ,IAAI,CAACnB,GAAnD,CADL,EADF,EADF,cAME,KAAC,YAAD,EAAc,OAAO,CAAEmB,IAAI,CAACL,IAA5B,EANF,cAOE,MAAC,uBAAD,EAAyB,SAAS,CAAE3B,OAAO,CAAC7B,MAA5C,wBACE,KAAC,IAAD,EAAM,EAAE,CAAE,SAAW6D,IAAI,CAACnB,GAA1B,uBACE,KAAC,UAAD,EACE,OAAO,CAAC,WADV,CAEE,KAAK,CAAC,WAFR,CAGE,SAAS,CAAEb,OAAO,CAACH,UAHrB,uBAKE,KAAC,QAAD,IALF,EADF,EADF,cAUE,KAAC,MAAD,EACE,aAAW,QADb,CAEE,OAAO,CAAC,WAFV,CAGE,KAAK,CAAC,SAHR,CAIE,OAAO,CAAE,kBAAM,CACb0B,WAAW,CAACS,IAAD,CAAOC,CAAP,CAAX,CACD,CANH,oBAVF,GAPF,GADF,EAAWA,CAAX,CADF,CAiCD,CAlCA,CADH,EANF,GADF,cA8CE,KAAC,QAAD,EACE,YAAY,CAAE,CACZI,QAAQ,CAAE,QADE,CAEZC,UAAU,CAAE,OAFA,CADhB,CAKE,IAAI,CAAElC,MAAM,CAACF,IALf,CAME,OAAO,CAAE0B,kBANX,CAOE,gBAAgB,CAAE,IAPpB,CAQE,OAAO,cAAE,aAAM,SAAS,CAAE5B,OAAO,CAACL,KAAzB,UAAiCS,MAAM,CAACD,aAAxC,EARX,EA9CF,GADF,CA2DD,CA5HD,CA8HA,cAAeJ,CAAAA,UAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport auth from \"../../utils/Auth/authHelper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\nimport ListItemSecondaryAction from \"@material-ui/core/ListItemSecondaryAction\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport Button from \"@material-ui/core/Button\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport { Link } from \"react-router-dom\";\nimport { findPeople, follow } from \"../../api/UserApi/userApi\";\n\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport ViewIcon from \"@material-ui/icons/Visibility\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: theme.mixins.gutters({\n    padding: theme.spacing(1),\n    margin: 0,\n  }),\n  root2: {\n    ...theme.typography.button,\n    backgroundColor: theme.palette.background,\n    padding: theme.spacing(1),\n  },\n  title: {\n    margin: `${theme.spacing(3)}px ${theme.spacing(1)}px ${theme.spacing(2)}px`,\n    color: theme.palette.openTitle,\n    fontSize: \"1em\",\n  },\n  avatar: {\n    marginRight: theme.spacing(1),\n  },\n  follow: {\n    right: theme.spacing(2),\n  },\n  snack: {\n    color: theme.palette.protectedTitle,\n  },\n  viewButton: {\n    verticalAlign: \"middle\",\n  },\n}));\n\nconst FindPeople = () => {\n  const classes = useStyles();\n  const [values, setValues] = useState({\n    users: [],\n    open: false,\n    followMessage: \"\",\n  });\n\n  const jwt = auth.isAuthenticated();\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    const signal = abortController.signal;\n\n    findPeople(\n      {\n        userId: jwt.user._id,\n      },\n      { t: jwt.token },\n      signal\n    ).then((data) => {\n      console.log(\"--Data From FindPeople in useEffect---\");\n      if (data && data.error) {\n        console.log(data.error);\n      } else {\n        setValues({ ...values, users: data });\n      }\n    });\n\n    return function cleanup() {\n      abortController.abort();\n    };\n  }, []);\n\n  //Clicking the Follow button will make a call to the follow API, and update the list of users to follow by splicing out the newly followed user.\n\n  const clickFollow = (user, idx) => {\n    follow(\n      {\n        userId: jwt.user._id,\n      },\n      { t: jwt.token },\n      user._id\n    ).then((data) => {\n      console.log(\"--- Data in click follow method in find people compo ---\");\n      console.log(data);\n      if (data.error) {\n        console.log(data.error);\n      } else {\n        let toFollow = values.users;\n        toFollow.splice(idx, 1);\n        setValues({\n          ...values,\n          users: toFollow,\n          open: true,\n          followMessage: `Following ${user.name}`,\n        });\n      }\n    });\n  };\n\n  const handleRequestClose = (e, reason) => {\n    setValues({ ...values, open: false });\n  };\n\n  return (\n    <div>\n      <Paper\n        className={classes.root}\n        elevation={4}\n        style={{ backgroundColor: \"#eeeeee\" }}\n      >\n        <div className={classes.root2}>{\"Follow Suggestions\"}</div>\n        <List>\n          {values.users.map((item, i) => {\n            return (\n              <span key={i}>\n                <ListItem>\n                  <ListItemAvatar className={classes.avatar}>\n                    <Avatar\n                      src={`${process.env.REACT_APP_API}/users/photo/${item._id}`}\n                    />\n                  </ListItemAvatar>\n                  <ListItemText primary={item.name} />\n                  <ListItemSecondaryAction className={classes.follow}>\n                    <Link to={\"/user/\" + item._id}>\n                      <IconButton\n                        variant=\"contained\"\n                        color=\"secondary\"\n                        className={classes.viewButton}\n                      >\n                        <ViewIcon />\n                      </IconButton>\n                    </Link>\n                    <Button\n                      aria-label=\"Follow\"\n                      variant=\"contained\"\n                      color=\"primary\"\n                      onClick={() => {\n                        clickFollow(item, i);\n                      }}\n                    >\n                      Follow\n                    </Button>\n                  </ListItemSecondaryAction>\n                </ListItem>\n              </span>\n            );\n          })}\n        </List>\n      </Paper>\n      {/*  Snackbar component that will open temporarily when the user is successfully followed, to tell the user that they started following this new user. */}\n      <Snackbar\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"right\",\n        }}\n        open={values.open}\n        onClose={handleRequestClose}\n        autoHideDuration={6000}\n        message={<span className={classes.snack}>{values.followMessage}</span>}\n      />\n    </div>\n  );\n};\n\nexport default FindPeople;\n"]},"metadata":{},"sourceType":"module"}